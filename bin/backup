#!/bin/bash

primary="/Volumes/MiniMe"
secondary="/Volumes/Secondary"

syncHome() {
	local target=$1
	if [ -e $target ]
	then
		echo "Syncing home to $target ..."
		rsync -rlptP --delete-excluded --delete-before --exclude-from ~/.dotfiles/backup-excludes.txt ~ $target/Backups
	else
		echo "Target not found: $target"
	fi
}

backupPhotos() {
	local source=$1
	local target=$2

	if [ -e $source ] && [ -e $target ]
	then
		echo "Backing up photos ..."
		rsync -rlptP --delete-excluded --delete-before $source/iPhoto $target/Backups
	else
		echo "Source and target not present. Skipping photo backup."
	fi
}

syncHome $primary
syncHome $secondary
backupPhotos $primary $secondary
